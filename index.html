<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>연제구 음식 룰렛</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f0f9ff; /* Light blue background */
        }
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }
        .roulette-display {
            width: 300px; /* Fixed width */
            height: 150px; /* Fixed height */
            border: 5px solid #3b82f6; /* Blue border */
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            background-color: #ffffff; /* White background */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            overflow: hidden; /* Hide overflowing text during animation */
            position: relative; /* For absolute positioning of spinning items */
        }
        .food-item {
            font-size: 2rem; /* 32px */
            font-weight: bold;
            color: #1d4ed8; /* Darker blue text */
            text-align: center;
            padding: 10px;
            white-space: nowrap; /* Prevent text wrapping */
            position: absolute; 
            transition: opacity 0.3s ease-out; 
        }
        .start-button {
            padding: 15px 30px;
            font-size: 1.25rem; /* 20px */
            font-weight: bold;
            color: white;
            background-color: #2563eb; /* Blue button */
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .start-button:hover {
            background-color: #1d4ed8; /* Darker blue on hover */
        }
        .start-button:active {
            transform: scale(0.98);
        }
        .message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #10b981; /* Green */
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            visibility: hidden;
        }
        .message-box.show {
            opacity: 1;
            visibility: visible;
        }
    </style>
</head>
<body class="bg-blue-50">
    <div class="container">
        <h1 class="text-4xl font-bold text-blue-700 mb-8 text-center">오늘 뭐 먹지? 🤔<br>연제구 배달 음식 룰렛!</h1>
        <div class="roulette-display" id="rouletteDisplay">
            <span class="food-item" id="foodResult">???</span>
        </div>
        <button class="start-button" id="startButton">오늘의 메뉴는? 룰렛 시작!</button>

        <div id="instructions" class="mt-8 p-6 bg-white rounded-lg shadow-md w-full max-w-md text-gray-700">
            <h2 class="text-xl font-semibold text-blue-600 mb-3">✨ 사용 방법 ✨</h2>
            <p class="mb-2">1. <strong class="text-blue-500">'오늘의 메뉴는? 룰렛 시작!'</strong> 버튼을 누르세요.</p>
            <p class="mb-2">2. 룰렛이 돌아가며 다양한 음식들이 빠르게 지나갑니다.</p>
            <p>3. 잠시 후, 오늘의 추천 메뉴가 짠! 하고 나타납니다.</p>
            <p class="mt-4 text-sm text-gray-500">※ 음식 목록은 코드 내에서 수정하거나 추가할 수 있습니다.</p>
        </div>
    </div>

    <div id="messageBox" class="message-box">메시지</div>

    <script>
        // 음식 목록
        const foodList = [
            "족발/보쌈", "찜/탕/찌개", "돈까스/회/일식", "피자", "고기/구이",
            "양식", "치킨", "중식", "아시안", "백반/죽/국수",
            "분식", "도시락", "패스트푸드", "디저트/카페", "샌드위치/샐러드",
            "곱창/막창", "해물찜/탕", "파스타", "떡볶이", "김치찜",
            "부대찌개", "쌀국수", "마라탕", "초밥", "덮밥"
        ];

        // HTML 요소 가져오기 (스크립트 상단에서 한 번만)
        const foodResultElement = document.getElementById('foodResult'); // 음식 이름이 표시될 요소
        const startButton = document.getElementById('startButton');
        const messageBox = document.getElementById('messageBox');
        // rouletteDisplay는 직접적인 조작이 많지 않아 필요시 함수 내에서 가져와도 무방하나, 일관성을 위해 여기서 선언해도 됩니다.
        // const rouletteDisplay = document.getElementById('rouletteDisplay'); 

        let spinningInterval;
        let spinCount = 0;
        const maxSpins = 30; 
        const spinDuration = 80; 

        // 메시지 박스를 보여주는 함수
        function showMessage(message, duration = 3000) {
            messageBox.textContent = message;
            messageBox.classList.add('show');
            setTimeout(() => {
                messageBox.classList.remove('show');
            }, duration);
        }

        // 룰렛 애니메이션 함수
        function spinRoulette() {
            // foodResultElement가 로드되지 않았으면 오류 처리
            if (!foodResultElement) {
                console.error("오류: 음식 표시 영역(#foodResult)을 찾을 수 없습니다.");
                showMessage("룰렛 실행에 필요한 중요 구성 요소를 찾지 못했습니다. 페이지를 새로고침 해보세요.", 5000);
                startButton.disabled = false; // 버튼 재활성화 시도
                startButton.textContent = "오류 발생! 다시 시도";
                return;
            }

            spinCount = 0;
            startButton.disabled = true; 
            startButton.textContent = "돌아가는 중... 🍕🍗🍜";
            
            foodResultElement.style.opacity = '1'; // 스핀 중에는 항상 보이도록 설정

            spinningInterval = setInterval(() => {
                const randomIndex = Math.floor(Math.random() * foodList.length);
                const currentFood = foodList[randomIndex];
                
                foodResultElement.textContent = currentFood; 

                spinCount++;

                if (spinCount >= maxSpins) {
                    clearInterval(spinningInterval);
                    finalizeSelection(currentFood); 
                }
            }, spinDuration);
        }

        // 최종 음식 선택 및 표시 함수
        function finalizeSelection(finalFood) {
            if (!foodResultElement) {
                console.error("오류: 최종 선택 시 음식 표시 영역(#foodResult)을 찾을 수 없습니다.");
                showMessage("룰렛 결과를 표시하는데 실패했습니다. 페이지를 새로고침 해보세요.", 5000);
                startButton.disabled = false; // 버튼 재활성화 시도
                startButton.textContent = "오류 발생! 다시 시도";
                return;
            }

            foodResultElement.textContent = finalFood;
            foodResultElement.style.opacity = '0'; 
            void foodResultElement.offsetHeight; // 강제 리플로우로 트랜지션 활성화
            foodResultElement.style.opacity = '1';

            startButton.disabled = false; 
            startButton.textContent = "한번 더! 룰렛 시작!";
            showMessage(`오늘의 추천 메뉴는 "${finalFood}" 입니다! 맛있게 드세요! 🎉`);
        }

        // 시작 버튼 클릭 이벤트 리스너
        if (startButton) {
            startButton.addEventListener('click', spinRoulette);
        } else {
            console.error("오류: 시작 버튼(#startButton)을 찾을 수 없습니다.");
            showMessage("시작 버튼을 찾을 수 없어 룰렛을 실행할 수 없습니다. 페이지를 새로고침 해보세요.", 5000);
        }
        

        // 초기 메시지 설정
        if (foodResultElement) {
            foodResultElement.textContent = "룰렛을 돌려보세요!";
            foodResultElement.style.opacity = '1';
        } else {
            // foodResultElement가 없는 경우에 대한 처리 (스크립트 로드 시점)
            console.error("오류: 초기화 시 음식 표시 영역(#foodResult)을 찾을 수 없습니다.");
            // 대체 텍스트를 rouletteDisplay에 직접 넣을 수도 있습니다.
            const displayDiv = document.getElementById('rouletteDisplay');
            if (displayDiv) {
                displayDiv.textContent = "표시 영역 로드 실패!";
                displayDiv.style.color = "red";
            }
        }

    </script>
</body>
</html>
